"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[447],{7659:(e,t,r)=>{r.d(t,{Df:()=>eV});var o,a,n,i,s,l,p,u,d,c=r(9447),m=r(3347),g=r(8221),f=r(2404),y=r(4663),v=r(2148),z=Object.defineProperty,h="AI_NoOutputSpecifiedError",b=`vercel.ai.error.${h}`,I=Symbol.for(b),E=class extends m.bD{constructor({message:e="No output specified."}={}){super({name:h,message:e}),this[o]=!0}static isInstance(e){return m.bD.hasMarker(e,b)}};o=I;var T=!1,w=e=>{if(0===e.length)return;let t=globalThis.AI_SDK_LOG_WARNINGS;if(!1!==t){if("function"==typeof t)return void t(e);for(let t of(T||(T=!0,console.info("AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.")),e))console.warn(function(e){let t="AI SDK Warning:";switch(e.type){case"unsupported-setting":{let r=`${t} The "${e.setting}" setting is not supported by this model`;return e.details&&(r+=` - ${e.details}`),r}case"unsupported-tool":{let r="name"in e.tool?e.tool.name:"unknown tool",o=`${t} The tool "${r}" is not supported by this model`;return e.details&&(o+=` - ${e.details}`),o}case"other":return`${t} ${e.message}`;default:return`${t} ${JSON.stringify(e,null,2)}`}}(t))}},x="AI_InvalidArgumentError",_=`vercel.ai.error.${x}`,N=Symbol.for(_),S=class extends m.bD{constructor({parameter:e,value:t,message:r}){super({name:x,message:`Invalid argument for parameter ${e}: ${r}`}),this[a]=!0,this.parameter=e,this.value=t}static isInstance(e){return m.bD.hasMarker(e,_)}};a=N;Symbol.for("vercel.ai.error.AI_InvalidStreamPartError");m.bD;var A="AI_InvalidToolInputError",O=`vercel.ai.error.${A}`,R=Symbol.for(O),C=class extends m.bD{constructor({toolInput:e,toolName:t,cause:r,message:o=`Invalid input for tool ${t}: ${(0,m.u1)(r)}`}){super({name:A,message:o,cause:r}),this[n]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return m.bD.hasMarker(e,O)}};n=R;Symbol.for("vercel.ai.error.AI_NoImageGeneratedError");m.bD;var k="AI_NoObjectGeneratedError",D=`vercel.ai.error.${k}`,j=Symbol.for(D),M=class extends m.bD{constructor({message:e="No object generated.",cause:t,text:r,response:o,usage:a,finishReason:n}){super({name:k,message:e,cause:t}),this[i]=!0,this.text=r,this.response=o,this.usage=a,this.finishReason=n}static isInstance(e){return m.bD.hasMarker(e,D)}};i=j;Symbol.for("vercel.ai.error.AI_NoOutputGeneratedError");m.bD,m.bD;var $="AI_NoSuchToolError",U=`vercel.ai.error.${$}`,P=Symbol.for(U),F=class extends m.bD{constructor({toolName:e,availableTools:t,message:r=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:$,message:r}),this[s]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return m.bD.hasMarker(e,U)}};s=P;var B="AI_ToolCallRepairError",L=`vercel.ai.error.${B}`,J=Symbol.for(L),q=class extends m.bD{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${(0,m.u1)(e)}`}){super({name:B,message:r,cause:e}),this[l]=!0,this.originalError=t}static isInstance(e){return m.bD.hasMarker(e,L)}};l=J;var W=class extends m.bD{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},K=Symbol.for("vercel.ai.error.AI_InvalidDataContentError");m.bD;var V="AI_InvalidMessageRoleError",Y=`vercel.ai.error.${V}`,G=Symbol.for(Y),Z=class extends m.bD{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:V,message:t}),this[p]=!0,this.role=e}static isInstance(e){return m.bD.hasMarker(e,Y)}};p=G;Symbol.for("vercel.ai.error.AI_MessageConversionError");m.bD;var H="AI_DownloadError",Q=`vercel.ai.error.${H}`,X=Symbol.for(Q),ee=class extends m.bD{constructor({url:e,statusCode:t,statusText:r,cause:o,message:a=null==o?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${o}`}){super({name:H,message:a,cause:o}),this[u]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return m.bD.hasMarker(e,Q)}};u=X;var et="AI_RetryError",er=`vercel.ai.error.${et}`,eo=Symbol.for(er),ea=class extends m.bD{constructor({message:e,reason:t,errors:r}){super({name:et,message:e}),this[d]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return m.bD.hasMarker(e,er)}};function en(e){var t;if("string"!=typeof e){if("v2"!==e.specificationVersion)throw new W({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return e}return(null!=(t=globalThis.AI_SDK_DEFAULT_PROVIDER)?t:g.JS).languageModel(e)}d=eo;var ei=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],es="5.0.81",el=async({url:e})=>{var t;let r=e.toString();try{let e=await fetch(r,{headers:(0,c.WZ)({},`ai-sdk/${es}`,(0,c.G1)())});if(!e.ok)throw new ee({url:r,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mediaType:null!=(t=e.headers.get("content-type"))?t:void 0}}catch(e){if(ee.isInstance(e))throw e;throw new ee({url:r,cause:e})}},ep=f.z.union([f.z.string(),f.z.instanceof(Uint8Array),f.z.instanceof(ArrayBuffer),f.z.custom(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function eu(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if("string"==typeof e)try{e=new URL(e)}catch(e){}if(e instanceof URL&&"data:"===e.protocol){let{mediaType:t,base64Content:r}=function(e){try{let[t,r]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mediaType:void 0,base64Content:void 0}}}(e.toString());if(null==t||null==r)throw new m.bD({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:r,mediaType:t}}return{data:e,mediaType:void 0}}async function ed({prompt:e,supportedUrls:t,download:r=((e=el)=>t=>Promise.all(t.map(async t=>t.isUrlSupportedByModel?null:e(t))))()}){let o=await ec(e.messages,r,t);return[...null!=e.system?[{role:"system",content:e.system}]:[],...e.messages.map(e=>(function({message:e,downloadedAssets:t}){let r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerOptions:e.providerOptions};case"user":if("string"==typeof e.content)return{role:"user",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions};return{role:"user",content:e.content.map(e=>(function(e,t){var r;let o;if("text"===e.type)return{type:"text",text:e.text,providerOptions:e.providerOptions};let a=e.type;switch(a){case"image":o=e.image;break;case"file":o=e.data;break;default:throw Error(`Unsupported part type: ${a}`)}let{data:n,mediaType:i}=eu(o),s=null!=i?i:e.mediaType,l=n;if(l instanceof URL){let e=t[l.toString()];e&&(l=e.data,null!=s||(s=e.mediaType))}switch(a){case"image":return(l instanceof Uint8Array||"string"==typeof l)&&(s=null!=(r=function({data:e,signatures:t}){let r="string"==typeof e&&e.startsWith("SUQz")||"string"!=typeof e&&e.length>10&&73===e[0]&&68===e[1]&&51===e[2]?(e=>{let t="string"==typeof e?(0,c.Z9)(e):e,r=(127&t[6])<<21|(127&t[7])<<14|(127&t[8])<<7|127&t[9];return t.slice(r+10)})(e):e,o="string"==typeof r?(0,c.Z9)(r.substring(0,Math.min(r.length,24))):r;for(let e of t)if(o.length>=e.bytesPrefix.length&&e.bytesPrefix.every((e,t)=>null===e||o[t]===e))return e.mediaType}({data:l,signatures:ei}))?r:s),{type:"file",mediaType:null!=s?s:"image/*",filename:void 0,data:l,providerOptions:e.providerOptions};case"file":if(null==s)throw Error("Media type is missing for file part");return{type:"file",mediaType:s,filename:e.filename,data:l,providerOptions:e.providerOptions}}})(e,t)).filter(e=>"text"!==e.type||""!==e.text),providerOptions:e.providerOptions};case"assistant":if("string"==typeof e.content)return{role:"assistant",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions};return{role:"assistant",content:e.content.filter(e=>"text"!==e.type||""!==e.text||null!=e.providerOptions).map(e=>{let t=e.providerOptions;switch(e.type){case"file":{let{data:r,mediaType:o}=eu(e.data);return{type:"file",data:r,filename:e.filename,mediaType:null!=o?o:e.mediaType,providerOptions:t}}case"reasoning":return{type:"reasoning",text:e.text,providerOptions:t};case"text":return{type:"text",text:e.text,providerOptions:t};case"tool-call":return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,providerExecuted:e.providerExecuted,providerOptions:t};case"tool-result":return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:e.output,providerOptions:t}}}),providerOptions:e.providerOptions};case"tool":return{role:"tool",content:e.content.map(e=>({type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:e.output,providerOptions:e.providerOptions})),providerOptions:e.providerOptions};default:throw new Z({role:r})}})({message:e,downloadedAssets:o}))]}async function ec(e,t,r){let o=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).map(e=>{var t;let r=null!=(t=e.mediaType)?t:"image"===e.type?"image/*":void 0,o="image"===e.type?e.image:e.data;if("string"==typeof o)try{o=new URL(o)}catch(e){}return{mediaType:r,data:o}}).filter(e=>e.data instanceof URL).map(e=>({url:e.data,isUrlSupportedByModel:null!=e.mediaType&&(0,c.qs)({url:e.data.toString(),mediaType:e.mediaType,supportedUrls:r})}));return Object.fromEntries((await t(o)).map((e,t)=>null==e?null:[o[t].url.toString(),{data:e.data,mediaType:e.mediaType}]).filter(e=>null!=e))}function em({maxOutputTokens:e,temperature:t,topP:r,topK:o,presencePenalty:a,frequencyPenalty:n,seed:i,stopSequences:s}){if(null!=e){if(!Number.isInteger(e))throw new S({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be an integer"});if(e<1)throw new S({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be >= 1"})}if(null!=t&&"number"!=typeof t)throw new S({parameter:"temperature",value:t,message:"temperature must be a number"});if(null!=r&&"number"!=typeof r)throw new S({parameter:"topP",value:r,message:"topP must be a number"});if(null!=o&&"number"!=typeof o)throw new S({parameter:"topK",value:o,message:"topK must be a number"});if(null!=a&&"number"!=typeof a)throw new S({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(null!=n&&"number"!=typeof n)throw new S({parameter:"frequencyPenalty",value:n,message:"frequencyPenalty must be a number"});if(null!=i&&!Number.isInteger(i))throw new S({parameter:"seed",value:i,message:"seed must be an integer"});return{maxOutputTokens:e,temperature:t,topP:r,topK:o,presencePenalty:a,frequencyPenalty:n,stopSequences:s,seed:i}}var eg=f.z.lazy(()=>f.z.union([f.z.null(),f.z.string(),f.z.number(),f.z.boolean(),f.z.record(f.z.string(),eg),f.z.array(eg)])),ef=f.z.record(f.z.string(),f.z.record(f.z.string(),eg)),ey=f.z.object({type:f.z.literal("text"),text:f.z.string(),providerOptions:ef.optional()}),ev=f.z.object({type:f.z.literal("image"),image:f.z.union([ep,f.z.instanceof(URL)]),mediaType:f.z.string().optional(),providerOptions:ef.optional()}),ez=f.z.object({type:f.z.literal("file"),data:f.z.union([ep,f.z.instanceof(URL)]),filename:f.z.string().optional(),mediaType:f.z.string(),providerOptions:ef.optional()}),eh=f.z.object({type:f.z.literal("reasoning"),text:f.z.string(),providerOptions:ef.optional()}),eb=f.z.object({type:f.z.literal("tool-call"),toolCallId:f.z.string(),toolName:f.z.string(),input:f.z.unknown(),providerOptions:ef.optional(),providerExecuted:f.z.boolean().optional()}),eI=f.z.discriminatedUnion("type",[f.z.object({type:f.z.literal("text"),value:f.z.string()}),f.z.object({type:f.z.literal("json"),value:eg}),f.z.object({type:f.z.literal("error-text"),value:f.z.string()}),f.z.object({type:f.z.literal("error-json"),value:eg}),f.z.object({type:f.z.literal("content"),value:f.z.array(f.z.union([f.z.object({type:f.z.literal("text"),text:f.z.string()}),f.z.object({type:f.z.literal("media"),data:f.z.string(),mediaType:f.z.string()})]))})]),eE=f.z.object({type:f.z.literal("tool-result"),toolCallId:f.z.string(),toolName:f.z.string(),output:eI,providerOptions:ef.optional()}),eT=f.z.object({role:f.z.literal("system"),content:f.z.string(),providerOptions:ef.optional()}),ew=f.z.object({role:f.z.literal("user"),content:f.z.union([f.z.string(),f.z.array(f.z.union([ey,ev,ez]))]),providerOptions:ef.optional()}),ex=f.z.object({role:f.z.literal("assistant"),content:f.z.union([f.z.string(),f.z.array(f.z.union([ey,ez,eh,eb,eE]))]),providerOptions:ef.optional()}),e_=f.z.object({role:f.z.literal("tool"),content:f.z.array(eE),providerOptions:ef.optional()}),eN=f.z.union([eT,ew,ex,e_]);async function eS(e){let t;if(null==e.prompt&&null==e.messages)throw new m.M3({prompt:e,message:"prompt or messages must be defined"});if(null!=e.prompt&&null!=e.messages)throw new m.M3({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(null!=e.system&&"string"!=typeof e.system)throw new m.M3({prompt:e,message:"system must be a string"});if(null!=e.prompt&&"string"==typeof e.prompt)t=[{role:"user",content:e.prompt}];else if(null!=e.prompt&&Array.isArray(e.prompt))t=e.prompt;else if(null!=e.messages)t=e.messages;else throw new m.M3({prompt:e,message:"prompt or messages must be defined"});if(0===t.length)throw new m.M3({prompt:e,message:"messages must not be empty"});let r=await (0,c.ZZ)({value:t,schema:f.z.array(eN)});if(!r.success)throw new m.M3({prompt:e,message:"The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.",cause:r.error});return{messages:t,system:e.system}}function eA({operationId:e,telemetry:t}){return{"operation.name":`${e}${(null==t?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}var eO={startSpan:()=>eR,startActiveSpan:(e,t,r,o)=>"function"==typeof t?t(eR):"function"==typeof r?r(eR):"function"==typeof o?o(eR):void 0},eR={spanContext:()=>eC,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},eC={traceId:"",spanId:"",traceFlags:0};function ek({name:e,tracer:t,attributes:r,fn:o,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:r},async e=>{try{let t=await o(e);return a&&e.end(),t}catch(t){try{eD(e,t)}finally{e.end()}throw t}})}function eD(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:v.s.ERROR,message:t.message})):e.setStatus({code:v.s.ERROR})}function ej({telemetry:e,attributes:t}){return(null==e?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((t,[r,o])=>{if(null==o)return t;if("object"==typeof o&&"input"in o&&"function"==typeof o.input){if((null==e?void 0:e.recordInputs)===!1)return t;let a=o.input();return null==a?t:{...t,[r]:a}}if("object"==typeof o&&"output"in o&&"function"==typeof o.output){if((null==e?void 0:e.recordOutputs)===!1)return t;let a=o.output();return null==a?t:{...t,[r]:a}}return{...t,[r]:o}},{})}function eM(e,t){return null==e&&null==t?void 0:(null!=e?e:0)+(null!=t?t:0)}async function e$(e,{maxRetries:t,delayInMs:r,backoffFactor:o,abortSignal:a},n=[]){try{return await e()}catch(p){if((0,c.zf)(p)||0===t)throw p;let i=(0,c.u1)(p),s=[...n,p],l=s.length;if(l>t)throw new ea({message:`Failed after ${l} attempts. Last error: ${i}`,reason:"maxRetriesExceeded",errors:s});if(p instanceof Error&&m.hL.isInstance(p)&&!0===p.isRetryable&&l<=t)return await (0,c.cb)(function({error:e,exponentialBackoffDelay:t}){let r,o=e.responseHeaders;if(!o)return t;let a=o["retry-after-ms"];if(a){let e=parseFloat(a);Number.isNaN(e)||(r=e)}let n=o["retry-after"];if(n&&void 0===r){let e=parseFloat(n);r=Number.isNaN(e)?Date.parse(n)-Date.now():1e3*e}return null!=r&&!Number.isNaN(r)&&0<=r&&(r<6e4||r<t)?r:t}({error:p,exponentialBackoffDelay:r}),{abortSignal:a}),e$(e,{maxRetries:t,delayInMs:o*r,backoffFactor:o,abortSignal:a},s);if(1===l)throw p;throw new ea({message:`Failed after ${l} attempts with non-retryable error: '${i}'`,reason:"errorNotRetryable",errors:s})}}function eU(e){let t=e.filter(e=>"text"===e.type);if(0!==t.length)return t.map(e=>e.text).join("")}var eP=class{constructor({data:e,mediaType:t}){let r=e instanceof Uint8Array;this.base64Data=r?void 0:e,this.uint8ArrayData=r?e:void 0,this.mediaType=t}get base64(){return null==this.base64Data&&(this.base64Data=(0,c.n_)(this.uint8ArrayData)),this.base64Data}get uint8Array(){return null==this.uint8ArrayData&&(this.uint8ArrayData=(0,c.Z9)(this.base64Data)),this.uint8ArrayData}};async function eF({toolCall:e,tools:t,repairToolCall:r,system:o,messages:a}){try{if(null==t)throw new F({toolName:e.toolName});try{return await eB({toolCall:e,tools:t})}catch(i){if(null==r||!(F.isInstance(i)||C.isInstance(i)))throw i;let n=null;try{n=await r({toolCall:e,tools:t,inputSchema:({toolName:e})=>{let{inputSchema:r}=t[e];return(0,c.mD)(r).jsonSchema},system:o,messages:a,error:i})}catch(e){throw new q({cause:e,originalError:i})}if(null==n)throw i;return await eB({toolCall:n,tools:t})}}catch(o){let t=await (0,c.N8)({text:e.input}),r=t.success?t.value:e.input;return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:r,dynamic:!0,invalid:!0,error:o}}}async function eB({toolCall:e,tools:t}){let r=e.toolName,o=t[r];if(null==o)throw new F({toolName:e.toolName,availableTools:Object.keys(t)});let a=(0,c.mD)(o.inputSchema),n=""===e.input.trim()?await (0,c.ZZ)({value:{},schema:a}):await (0,c.N8)({text:e.input,schema:a});if(!1===n.success)throw new C({toolName:r,toolInput:e.input,cause:n.error});return"dynamic"===o.type?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:n.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0}:{type:"tool-call",toolCallId:e.toolCallId,toolName:r,input:n.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}var eL=class{constructor({content:e,finishReason:t,usage:r,warnings:o,request:a,response:n,providerMetadata:i}){this.content=e,this.finishReason=t,this.usage=r,this.warnings=o,this.request=a,this.response=n,this.providerMetadata=i}get text(){return this.content.filter(e=>"text"===e.type).map(e=>e.text).join("")}get reasoning(){return this.content.filter(e=>"reasoning"===e.type)}get reasoningText(){return 0===this.reasoning.length?void 0:this.reasoning.map(e=>e.text).join("")}get files(){return this.content.filter(e=>"file"===e.type).map(e=>e.file)}get sources(){return this.content.filter(e=>"source"===e.type)}get toolCalls(){return this.content.filter(e=>"tool-call"===e.type)}get staticToolCalls(){return this.toolCalls.filter(e=>!0!==e.dynamic)}get dynamicToolCalls(){return this.toolCalls.filter(e=>!0===e.dynamic)}get toolResults(){return this.content.filter(e=>"tool-result"===e.type)}get staticToolResults(){return this.toolResults.filter(e=>!0!==e.dynamic)}get dynamicToolResults(){return this.toolResults.filter(e=>!0===e.dynamic)}};async function eJ({stopConditions:e,steps:t}){return(await Promise.all(e.map(e=>e({steps:t})))).some(e=>e)}function eq({output:e,tool:t,errorMode:r}){return"text"===r?{type:"error-text",value:(0,m.u1)(e)}:"json"===r?{type:"error-json",value:eW(e)}:(null==t?void 0:t.toModelOutput)?t.toModelOutput(e):"string"==typeof e?{type:"text",value:e}:{type:"json",value:eW(e)}}function eW(e){return void 0===e?null:e}var eK=(0,c.hK)({prefix:"aitxt",size:24});async function eV({model:e,tools:t,toolChoice:r,system:o,prompt:a,messages:n,maxRetries:i,abortSignal:s,headers:l,stopWhen:p=function(e){return({steps:e})=>1===e.length}(0),experimental_output:u,experimental_telemetry:d,providerOptions:f,experimental_activeTools:v,activeTools:z=v,experimental_prepareStep:h,prepareStep:b=h,experimental_repairToolCall:I,experimental_download:E,experimental_context:T,_internal:{generateId:x=eK,currentDate:_=()=>new Date}={},onStepFinish:N,...A}){let O=en(e),R=void 0===p?[]:Array.isArray(p)?p:[p],{maxRetries:C,retry:k}=function({maxRetries:e,abortSignal:t}){if(null!=e){if(!Number.isInteger(e))throw new S({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new S({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let r=null!=e?e:2;return{maxRetries:r,retry:(({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2,abortSignal:o}={})=>async a=>e$(a,{maxRetries:e,delayInMs:t,backoffFactor:r,abortSignal:o}))({maxRetries:r,abortSignal:t})}}({maxRetries:i,abortSignal:s}),D=em(A),j=(0,c.WZ)(null!=l?l:{},`ai/${es}`),M=function({model:e,settings:t,telemetry:r,headers:o}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,r])=>(e[`ai.settings.${t}`]=r,e),{}),...Object.entries(null!=(a=null==r?void 0:r.metadata)?a:{}).reduce((e,[t,r])=>(e[`ai.telemetry.metadata.${t}`]=r,e),{}),...Object.entries(null!=o?o:{}).reduce((e,[t,r])=>(void 0!==r&&(e[`ai.request.headers.${t}`]=r),e),{})}}({model:O,telemetry:d,headers:j,settings:{...D,maxRetries:C}}),$=await eS({system:o,prompt:a,messages:n}),U=function({isEnabled:e=!1,tracer:t}={}){return e?t||y.u.getTracer("ai"):eO}(d);try{return await ek({name:"ai.generateText",attributes:ej({telemetry:d,attributes:{...eA({operationId:"ai.generateText",telemetry:d}),...M,"ai.model.provider":O.provider,"ai.model.id":O.modelId,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:a,messages:n})}}}),tracer:U,fn:async e=>{var a,n,i,l,p,m,g;let y,v,h=em(A),S=[],C=[],D=[],P=[];do{let e=[...$.messages,...D],v=await (null==b?void 0:b({model:O,steps:P,stepNumber:P.length,messages:e})),R=en(null!=(a=null==v?void 0:v.model)?a:O),F=await ed({prompt:{system:null!=(n=null==v?void 0:v.system)?n:$.system,messages:null!=(i=null==v?void 0:v.messages)?i:e},supportedUrls:await R.supportedUrls,download:E}),{toolChoice:B,tools:L}=function({tools:e,toolChoice:t,activeTools:r}){return null!=e&&Object.keys(e).length>0?{tools:(null!=r?Object.entries(e).filter(([e])=>r.includes(e)):Object.entries(e)).map(([e,t])=>{let r=t.type;switch(r){case void 0:case"dynamic":case"function":return{type:"function",name:e,description:t.description,inputSchema:(0,c.mD)(t.inputSchema).jsonSchema,providerOptions:t.providerOptions};case"provider-defined":return{type:"provider-defined",name:e,id:t.id,args:t.args};default:throw Error(`Unsupported tool type: ${r}`)}}),toolChoice:null==t?{type:"auto"}:"string"==typeof t?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}({tools:t,toolChoice:null!=(l=null==v?void 0:v.toolChoice)?l:r,activeTools:null!=(p=null==v?void 0:v.activeTools)?p:z});y=await k(()=>{var e;return ek({name:"ai.generateText.doGenerate",attributes:ej({telemetry:d,attributes:{...eA({operationId:"ai.generateText.doGenerate",telemetry:d}),...M,"ai.model.provider":R.provider,"ai.model.id":R.modelId,"ai.prompt.messages":{input:()=>JSON.stringify(F.map(e=>({...e,content:"string"==typeof e.content?e.content:e.content.map(e=>{var t;return"file"===e.type?{...e,data:e.data instanceof Uint8Array?"string"==typeof(t=e.data)?t:t instanceof ArrayBuffer?(0,c.n_)(new Uint8Array(t)):(0,c.n_)(t):e.data}:e})})))},"ai.prompt.tools":{input:()=>null==L?void 0:L.map(e=>JSON.stringify(e))},"ai.prompt.toolChoice":{input:()=>null!=B?JSON.stringify(B):void 0},"gen_ai.system":R.provider,"gen_ai.request.model":R.modelId,"gen_ai.request.frequency_penalty":A.frequencyPenalty,"gen_ai.request.max_tokens":A.maxOutputTokens,"gen_ai.request.presence_penalty":A.presencePenalty,"gen_ai.request.stop_sequences":A.stopSequences,"gen_ai.request.temperature":null!=(e=A.temperature)?e:void 0,"gen_ai.request.top_k":A.topK,"gen_ai.request.top_p":A.topP}}),tracer:U,fn:async e=>{var t,r,o,a,n,i,l,p;let c=await R.doGenerate({...h,tools:L,toolChoice:B,responseFormat:null==u?void 0:u.responseFormat,prompt:F,providerOptions:f,abortSignal:s,headers:j}),m={id:null!=(r=null==(t=c.response)?void 0:t.id)?r:x(),timestamp:null!=(a=null==(o=c.response)?void 0:o.timestamp)?a:_(),modelId:null!=(i=null==(n=c.response)?void 0:n.modelId)?i:R.modelId,headers:null==(l=c.response)?void 0:l.headers,body:null==(p=c.response)?void 0:p.body};return e.setAttributes(ej({telemetry:d,attributes:{"ai.response.finishReason":c.finishReason,"ai.response.text":{output:()=>eU(c.content)},"ai.response.toolCalls":{output:()=>{let e=eZ(c.content);return null==e?void 0:JSON.stringify(e)}},"ai.response.id":m.id,"ai.response.model":m.modelId,"ai.response.timestamp":m.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(c.providerMetadata),"ai.usage.promptTokens":c.usage.inputTokens,"ai.usage.completionTokens":c.usage.outputTokens,"gen_ai.response.finish_reasons":[c.finishReason],"gen_ai.response.id":m.id,"gen_ai.response.model":m.modelId,"gen_ai.usage.input_tokens":c.usage.inputTokens,"gen_ai.usage.output_tokens":c.usage.outputTokens}})),{...c,response:m}}})});let J=await Promise.all(y.content.filter(e=>"tool-call"===e.type).map(r=>eF({toolCall:r,tools:t,repairToolCall:I,system:o,messages:e})));for(let r of J){if(r.invalid)continue;let o=t[r.toolName];(null==o?void 0:o.onInputAvailable)!=null&&await o.onInputAvailable({input:r.input,toolCallId:r.toolCallId,messages:e,abortSignal:s,experimental_context:T})}let q=J.filter(e=>e.invalid&&e.dynamic);for(let e of(C=[],q))C.push({type:"tool-error",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,error:(0,c.u1)(e.error),dynamic:!0});S=J.filter(e=>!e.providerExecuted),null!=t&&C.push(...await eY({toolCalls:S.filter(e=>!e.invalid),tools:t,tracer:U,telemetry:d,messages:e,abortSignal:s,experimental_context:T}));let W=function({content:e,toolCalls:t,toolOutputs:r}){return[...e.map(e=>{switch(e.type){case"text":case"reasoning":case"source":return e;case"file":return{type:"file",file:new eP(e)};case"tool-call":return t.find(t=>t.toolCallId===e.toolCallId);case"tool-result":{let r=t.find(t=>t.toolCallId===e.toolCallId);if(null==r)throw Error(`Tool call ${e.toolCallId} not found.`);if(e.isError)return{type:"tool-error",toolCallId:e.toolCallId,toolName:e.toolName,input:r.input,error:e.result,providerExecuted:!0,dynamic:r.dynamic};return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,input:r.input,output:e.result,providerExecuted:!0,dynamic:r.dynamic}}}}),...r]}({content:y.content,toolCalls:J,toolOutputs:C});D.push(...function({content:e,tools:t}){let r=[],o=e.filter(e=>"source"!==e.type).filter(e=>("tool-result"!==e.type||e.providerExecuted)&&("tool-error"!==e.type||e.providerExecuted)).filter(e=>"text"!==e.type||e.text.length>0).map(e=>{switch(e.type){case"text":return{type:"text",text:e.text,providerOptions:e.providerMetadata};case"reasoning":return{type:"reasoning",text:e.text,providerOptions:e.providerMetadata};case"file":return{type:"file",data:e.file.base64,mediaType:e.file.mediaType,providerOptions:e.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,providerExecuted:e.providerExecuted,providerOptions:e.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:eq({tool:null==t?void 0:t[e.toolName],output:e.output,errorMode:"none"}),providerExecuted:!0,providerOptions:e.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:eq({tool:null==t?void 0:t[e.toolName],output:e.error,errorMode:"json"}),providerOptions:e.providerMetadata}}});o.length>0&&r.push({role:"assistant",content:o});let a=e.filter(e=>"tool-result"===e.type||"tool-error"===e.type).filter(e=>!e.providerExecuted).map(e=>({type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,output:eq({tool:null==t?void 0:t[e.toolName],output:"tool-result"===e.type?e.output:e.error,errorMode:"tool-error"===e.type?"text":"none"})}));return a.length>0&&r.push({role:"tool",content:a}),r}({content:W,tools:t}));let K=new eL({content:W,finishReason:y.finishReason,usage:y.usage,warnings:y.warnings,providerMetadata:y.providerMetadata,request:null!=(m=y.request)?m:{},response:{...y.response,messages:structuredClone(D)}});w(null!=(g=y.warnings)?g:[]),P.push(K),await (null==N?void 0:N(K))}while(S.length>0&&C.length===S.length&&!await eJ({stopConditions:R,steps:P}));e.setAttributes(ej({telemetry:d,attributes:{"ai.response.finishReason":y.finishReason,"ai.response.text":{output:()=>eU(y.content)},"ai.response.toolCalls":{output:()=>{let e=eZ(y.content);return null==e?void 0:JSON.stringify(e)}},"ai.response.providerMetadata":JSON.stringify(y.providerMetadata),"ai.usage.promptTokens":y.usage.inputTokens,"ai.usage.completionTokens":y.usage.outputTokens}}));let F=P[P.length-1];return"stop"===F.finishReason&&(v=await (null==u?void 0:u.parseOutput({text:F.text},{response:F.response,usage:F.usage,finishReason:F.finishReason}))),new eG({steps:P,resolvedOutput:v})}})}catch(e){throw g.jN.isInstance(e)||g.vj.isInstance(e)?new m.bD({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:e}):e}}async function eY({toolCalls:e,tools:t,tracer:r,telemetry:o,messages:a,abortSignal:n,experimental_context:i}){return(await Promise.all(e.map(async({toolCallId:e,toolName:s,input:l})=>{let p=t[s];if((null==p?void 0:p.execute)!=null)return ek({name:"ai.toolCall",attributes:ej({telemetry:o,attributes:{...eA({operationId:"ai.toolCall",telemetry:o}),"ai.toolCall.name":s,"ai.toolCall.id":e,"ai.toolCall.args":{output:()=>JSON.stringify(l)}}}),tracer:r,fn:async t=>{try{let r;for await(let t of(0,c.o8)({execute:p.execute.bind(p),input:l,options:{toolCallId:e,messages:a,abortSignal:n,experimental_context:i}}))"final"===t.type&&(r=t.output);try{t.setAttributes(ej({telemetry:o,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(r)}}}))}catch(e){}return{type:"tool-result",toolCallId:e,toolName:s,input:l,output:r,dynamic:"dynamic"===p.type}}catch(r){return eD(t,r),{type:"tool-error",toolCallId:e,toolName:s,input:l,error:r,dynamic:"dynamic"===p.type}}}})}))).filter(e=>null!=e)}var eG=class{constructor(e){this.steps=e.steps,this.resolvedOutput=e.resolvedOutput}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get totalUsage(){return this.steps.reduce((e,t)=>{var r;return r=t.usage,{inputTokens:eM(e.inputTokens,r.inputTokens),outputTokens:eM(e.outputTokens,r.outputTokens),totalTokens:eM(e.totalTokens,r.totalTokens),reasoningTokens:eM(e.reasoningTokens,r.reasoningTokens),cachedInputTokens:eM(e.cachedInputTokens,r.cachedInputTokens)}},{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0})}get experimental_output(){if(null==this.resolvedOutput)throw new E;return this.resolvedOutput}};function eZ(e){let t=e.filter(e=>"tool-call"===e.type);if(0!==t.length)return t.map(e=>({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input}))}async function eH(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=await (0,c.N8)({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await (0,c.N8)({text:function(e){let t=["ROOT"],r=-1,o=null;function a(e,a,n){switch(e){case'"':r=a,t.pop(),t.push(n),t.push("INSIDE_STRING");break;case"f":case"t":case"n":r=a,o=a,t.pop(),t.push(n),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(n),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=a,t.pop(),t.push(n),t.push("INSIDE_NUMBER");break;case"{":r=a,t.pop(),t.push(n),t.push("INSIDE_OBJECT_START");break;case"[":r=a,t.pop(),t.push(n),t.push("INSIDE_ARRAY_START")}}function n(e,o){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":r=o,t.pop()}}function i(e,o){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=o,t.pop()}}for(let s=0;s<e.length;s++){let l=e[s];switch(t[t.length-1]){case"ROOT":a(l,s,"FINISH");break;case"INSIDE_OBJECT_START":switch(l){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":r=s,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===l&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":a(l,s,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":n(l,s);break;case"INSIDE_STRING":switch(l){case'"':t.pop(),r=s;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:r=s}break;case"INSIDE_ARRAY_START":"]"===l?(r=s,t.pop()):(r=s,a(l,s,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(l){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=s,t.pop();break;default:r=s}break;case"INSIDE_ARRAY_AFTER_COMMA":a(l,s,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),r=s;break;case"INSIDE_NUMBER":switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=s;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,s),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&n(l,s);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&n(l,s);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,s);break;default:t.pop()}break;case"INSIDE_LITERAL":{let a=e.substring(o,s+1);"false".startsWith(a)||"true".startsWith(a)||"null".startsWith(a)?r=s:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?n(l,s):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,s))}}}let s=e.slice(0,r+1);for(let r=t.length-1;r>=0;r--)switch(t[r]){case"INSIDE_STRING":s+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":s+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":s+="]";break;case"INSIDE_LITERAL":{let t=e.substring(o,e.length);"true".startsWith(t)?s+="true".slice(t.length):"false".startsWith(t)?s+="false".slice(t.length):"null".startsWith(t)&&(s+="null".slice(t.length))}}return s}(e)})).success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}TransformStream,(0,c.fE)(()=>(0,c.jN)(f.z.union([f.z.strictObject({type:f.z.literal("text-start"),id:f.z.string(),providerMetadata:ef.optional()}),f.z.strictObject({type:f.z.literal("text-delta"),id:f.z.string(),delta:f.z.string(),providerMetadata:ef.optional()}),f.z.strictObject({type:f.z.literal("text-end"),id:f.z.string(),providerMetadata:ef.optional()}),f.z.strictObject({type:f.z.literal("error"),errorText:f.z.string()}),f.z.strictObject({type:f.z.literal("tool-input-start"),toolCallId:f.z.string(),toolName:f.z.string(),providerExecuted:f.z.boolean().optional(),dynamic:f.z.boolean().optional()}),f.z.strictObject({type:f.z.literal("tool-input-delta"),toolCallId:f.z.string(),inputTextDelta:f.z.string()}),f.z.strictObject({type:f.z.literal("tool-input-available"),toolCallId:f.z.string(),toolName:f.z.string(),input:f.z.unknown(),providerExecuted:f.z.boolean().optional(),providerMetadata:ef.optional(),dynamic:f.z.boolean().optional()}),f.z.strictObject({type:f.z.literal("tool-input-error"),toolCallId:f.z.string(),toolName:f.z.string(),input:f.z.unknown(),providerExecuted:f.z.boolean().optional(),providerMetadata:ef.optional(),dynamic:f.z.boolean().optional(),errorText:f.z.string()}),f.z.strictObject({type:f.z.literal("tool-output-available"),toolCallId:f.z.string(),output:f.z.unknown(),providerExecuted:f.z.boolean().optional(),dynamic:f.z.boolean().optional(),preliminary:f.z.boolean().optional()}),f.z.strictObject({type:f.z.literal("tool-output-error"),toolCallId:f.z.string(),errorText:f.z.string(),providerExecuted:f.z.boolean().optional(),dynamic:f.z.boolean().optional()}),f.z.strictObject({type:f.z.literal("reasoning-start"),id:f.z.string(),providerMetadata:ef.optional()}),f.z.strictObject({type:f.z.literal("reasoning-delta"),id:f.z.string(),delta:f.z.string(),providerMetadata:ef.optional()}),f.z.strictObject({type:f.z.literal("reasoning-end"),id:f.z.string(),providerMetadata:ef.optional()}),f.z.strictObject({type:f.z.literal("source-url"),sourceId:f.z.string(),url:f.z.string(),title:f.z.string().optional(),providerMetadata:ef.optional()}),f.z.strictObject({type:f.z.literal("source-document"),sourceId:f.z.string(),mediaType:f.z.string(),title:f.z.string(),filename:f.z.string().optional(),providerMetadata:ef.optional()}),f.z.strictObject({type:f.z.literal("file"),url:f.z.string(),mediaType:f.z.string(),providerMetadata:ef.optional()}),f.z.strictObject({type:f.z.custom(e=>"string"==typeof e&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:f.z.string().optional(),data:f.z.unknown(),transient:f.z.boolean().optional()}),f.z.strictObject({type:f.z.literal("start-step")}),f.z.strictObject({type:f.z.literal("finish-step")}),f.z.strictObject({type:f.z.literal("start"),messageId:f.z.string().optional(),messageMetadata:f.z.unknown().optional()}),f.z.strictObject({type:f.z.literal("finish"),messageMetadata:f.z.unknown().optional()}),f.z.strictObject({type:f.z.literal("abort")}),f.z.strictObject({type:f.z.literal("message-metadata"),messageMetadata:f.z.unknown()})]))),(0,c.hK)({prefix:"aitxt",size:24}),(0,c.hK)({prefix:"aiobj",size:24}),(0,c.hK)({prefix:"aiobj",size:24}),((e,t)=>{for(var r in t)z(e,r,{get:t[r],enumerable:!0})})({},{object:()=>eX,text:()=>eQ});var eQ=()=>({type:"text",responseFormat:{type:"text"},parsePartial:async({text:e})=>({partial:e}),parseOutput:async({text:e})=>e}),eX=({schema:e})=>{let t=(0,c.mD)(e);return{type:"object",responseFormat:{type:"json",schema:t.jsonSchema},async parsePartial({text:e}){let t=await eH(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:t.value};default:{let e=t.state;throw Error(`Unsupported parse state: ${e}`)}}},async parseOutput({text:e},r){let o=await (0,c.N8)({text:e});if(!o.success)throw new M({message:"No object generated: could not parse the response.",cause:o.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});let a=await (0,c.ZZ)({value:o.value,schema:t});if(!a.success)throw new M({message:"No object generated: response did not match schema.",cause:a.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});return a.value}}},e0=Symbol.for("vercel.ai.error.AI_NoSuchProviderError");m.eM,m.bD,(0,c.fE)(()=>(0,c.jN)(f.z.array(f.z.object({id:f.z.string(),role:f.z.enum(["system","user","assistant"]),metadata:f.z.unknown().optional(),parts:f.z.array(f.z.union([f.z.object({type:f.z.literal("text"),text:f.z.string(),state:f.z.enum(["streaming","done"]).optional(),providerMetadata:ef.optional()}),f.z.object({type:f.z.literal("reasoning"),text:f.z.string(),state:f.z.enum(["streaming","done"]).optional(),providerMetadata:ef.optional()}),f.z.object({type:f.z.literal("source-url"),sourceId:f.z.string(),url:f.z.string(),title:f.z.string().optional(),providerMetadata:ef.optional()}),f.z.object({type:f.z.literal("source-document"),sourceId:f.z.string(),mediaType:f.z.string(),title:f.z.string(),filename:f.z.string().optional(),providerMetadata:ef.optional()}),f.z.object({type:f.z.literal("file"),mediaType:f.z.string(),filename:f.z.string().optional(),url:f.z.string(),providerMetadata:ef.optional()}),f.z.object({type:f.z.literal("step-start")}),f.z.object({type:f.z.string().startsWith("data-"),id:f.z.string().optional(),data:f.z.unknown()}),f.z.object({type:f.z.literal("dynamic-tool"),toolName:f.z.string(),toolCallId:f.z.string(),state:f.z.literal("input-streaming"),input:f.z.unknown().optional(),output:f.z.never().optional(),errorText:f.z.never().optional()}),f.z.object({type:f.z.literal("dynamic-tool"),toolName:f.z.string(),toolCallId:f.z.string(),state:f.z.literal("input-available"),input:f.z.unknown(),output:f.z.never().optional(),errorText:f.z.never().optional(),callProviderMetadata:ef.optional()}),f.z.object({type:f.z.literal("dynamic-tool"),toolName:f.z.string(),toolCallId:f.z.string(),state:f.z.literal("output-available"),input:f.z.unknown(),output:f.z.unknown(),errorText:f.z.never().optional(),callProviderMetadata:ef.optional(),preliminary:f.z.boolean().optional()}),f.z.object({type:f.z.literal("dynamic-tool"),toolName:f.z.string(),toolCallId:f.z.string(),state:f.z.literal("output-error"),input:f.z.unknown(),output:f.z.never().optional(),errorText:f.z.string(),callProviderMetadata:ef.optional()}),f.z.object({type:f.z.string().startsWith("tool-"),toolCallId:f.z.string(),state:f.z.literal("input-streaming"),providerExecuted:f.z.boolean().optional(),input:f.z.unknown().optional(),output:f.z.never().optional(),errorText:f.z.never().optional(),approval:f.z.never().optional()}),f.z.object({type:f.z.string().startsWith("tool-"),toolCallId:f.z.string(),state:f.z.literal("input-available"),providerExecuted:f.z.boolean().optional(),input:f.z.unknown(),output:f.z.never().optional(),errorText:f.z.never().optional(),callProviderMetadata:ef.optional(),approval:f.z.never().optional()}),f.z.object({type:f.z.string().startsWith("tool-"),toolCallId:f.z.string(),state:f.z.literal("approval-requested"),input:f.z.unknown(),providerExecuted:f.z.boolean().optional(),output:f.z.never().optional(),errorText:f.z.never().optional(),callProviderMetadata:ef.optional(),approval:f.z.object({id:f.z.string(),approved:f.z.never().optional(),reason:f.z.never().optional()})}),f.z.object({type:f.z.string().startsWith("tool-"),toolCallId:f.z.string(),state:f.z.literal("approval-responded"),input:f.z.unknown(),providerExecuted:f.z.boolean().optional(),output:f.z.never().optional(),errorText:f.z.never().optional(),callProviderMetadata:ef.optional(),approval:f.z.object({id:f.z.string(),approved:f.z.boolean(),reason:f.z.string().optional()})}),f.z.object({type:f.z.string().startsWith("tool-"),toolCallId:f.z.string(),state:f.z.literal("output-available"),providerExecuted:f.z.boolean().optional(),input:f.z.unknown(),output:f.z.unknown(),errorText:f.z.never().optional(),callProviderMetadata:ef.optional(),preliminary:f.z.boolean().optional(),approval:f.z.object({id:f.z.string(),approved:f.z.literal(!0),reason:f.z.string().optional()}).optional()}),f.z.object({type:f.z.string().startsWith("tool-"),toolCallId:f.z.string(),state:f.z.literal("output-error"),providerExecuted:f.z.boolean().optional(),input:f.z.unknown(),output:f.z.never().optional(),errorText:f.z.string(),callProviderMetadata:ef.optional(),approval:f.z.object({id:f.z.string(),approved:f.z.literal(!0),reason:f.z.string().optional()}).optional()}),f.z.object({type:f.z.string().startsWith("tool-"),toolCallId:f.z.string(),state:f.z.literal("output-denied"),providerExecuted:f.z.boolean().optional(),input:f.z.unknown(),output:f.z.never().optional(),errorText:f.z.never().optional(),callProviderMetadata:ef.optional(),approval:f.z.object({id:f.z.string(),approved:f.z.literal(!1),reason:f.z.string().optional()})})]))}))))}}]);