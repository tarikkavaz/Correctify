@import 'tailwindcss';
@plugin '@tailwindcss/typography';

@custom-variant dark (&:where(.dark, .dark *));

:root {
  /* Base colors from custom.css */
  --background: oklch(1.0000 0 0);
  --foreground: oklch(0.1884 0.0128 248.5103);
  --card: oklch(0.9784 0.0011 197.1387);
  --card-foreground: oklch(0.1884 0.0128 248.5103);
  --popover: oklch(1.0000 0 0);
  --popover-foreground: oklch(0.1884 0.0128 248.5103);
  --primary: oklch(0.5789 0.1899 140.8644);
  --primary-foreground: oklch(1.0000 0 0);
  --secondary: oklch(0.1884 0.0128 248.5103);
  --secondary-foreground: oklch(1.0000 0 0);
  --muted: oklch(0.9222 0.0013 286.3737);
  --muted-foreground: oklch(0.1884 0.0128 248.5103);
  --accent: oklch(0.9392 0.0166 250.8453);
  --accent-foreground: oklch(0.5789 0.1899 140.8644);
  --destructive: oklch(0.6188 0.2376 25.7658);
  --destructive-foreground: oklch(1.0000 0 0);
  --border: oklch(0.9317 0.0118 231.6594);
  --input: oklch(0.9809 0.0025 228.7836);
  --ring: oklch(0.5789 0.1899 140.8644);
  
  /* Map to app color variables */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-border: var(--border);
  --color-primary: var(--primary);
  --color-primary-hover: oklch(0.4789 0.1599 140.8644); /* darker primary for hover */
  --color-primary-link: var(--primary);
  
  /* Text colors */
  --color-text-base: var(--foreground);
  --color-text-muted: var(--muted-foreground);
  --color-text-on-primary: var(--primary-foreground);
  --color-text-link: var(--primary);
  --color-button-text: var(--primary-foreground);
  
  /* Prose/Content */
  --color-prose-text: var(--foreground);
  --color-code-bg: var(--muted);
  --color-code-text: var(--muted-foreground);
  --color-code-pre-bg: var(--muted);
  --color-code-pre-text: var(--foreground);
  --color-selection: oklch(0.5789 0.1899 140.8644 / 0.3);
  --color-placeholder: var(--muted-foreground);
  
  /* UI Elements */
  --color-modal-backdrop: rgba(0, 0, 0, 0.5);
  --color-card-bg: var(--card);
  --color-tooltip-bg: var(--muted-foreground);
  --color-divider: var(--border);
  
  /* Alert/Status colors - Info/Blue */
  --color-info-bg: oklch(0.955 0.024 254.604);
  --color-info-border: oklch(0.885 0.071 254.946);
  --color-info-text: oklch(0.367 0.131 265.633);
  --color-info-icon: oklch(0.367 0.131 265.633);
  
  /* Alert/Status colors - Warning/Yellow */
  --color-warning-bg: oklch(0.981 0.024 97.433);
  --color-warning-border: oklch(0.932 0.111 99.572);
  --color-warning-text: oklch(0.455 0.107 73.324);
  --color-warning-icon: oklch(0.455 0.107 73.324);
  
  /* Alert/Status colors - Success/Purple (for tips) */
  --color-success-bg: oklch(0.976 0.025 308.299);
  --color-success-border: oklch(0.913 0.065 307.174);
  --color-success-text: oklch(0.413 0.148 308.526);
  --color-success-icon: oklch(0.413 0.148 308.526);
  
  /* Alert/Status colors - Error/Red */
  --color-error-bg: oklch(0.971 0.022 17.396);
  --color-error-border: oklch(0.898 0.095 18.334);
  --color-error-text: oklch(0.478 0.194 27.325);
  --color-error-icon: var(--destructive);
}

/* Dark mode - Custom theme */
.dark {
  /* Base colors from custom.css dark */
  --background: oklch(0 0 0);
  --foreground: oklch(0.9328 0.0025 228.7857);
  --card: oklch(0.2097 0.0080 274.5332);
  --card-foreground: oklch(0.8853 0 0);
  --popover: oklch(0 0 0);
  --popover-foreground: oklch(0.9328 0.0025 228.7857);
  --primary: oklch(0.5789 0.1899 140.8644);
  --primary-foreground: oklch(1.0000 0 0);
  --secondary: oklch(0.9622 0.0035 219.5331);
  --secondary-foreground: oklch(0.1884 0.0128 248.5103);
  --muted: oklch(0.2090 0 0);
  --muted-foreground: oklch(0.5637 0.0078 247.9662);
  --accent: oklch(0.1928 0.0331 242.5459);
  --accent-foreground: oklch(0.5789 0.1899 140.8644);
  --destructive: oklch(0.6188 0.2376 25.7658);
  --destructive-foreground: oklch(1.0000 0 0);
  --border: oklch(0.2674 0.0047 248.0045);
  --input: oklch(0.3020 0.0288 244.8244);
  --ring: oklch(0.5789 0.1899 140.8644);
  
  /* Map to app color variables */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-border: var(--border);
  --color-primary: var(--primary);
  --color-primary-hover: oklch(0.6789 0.2099 140.8644); /* lighter primary for hover */
  --color-primary-link: var(--primary);
  
  /* Text colors */
  --color-text-base: var(--foreground);
  --color-text-muted: var(--muted-foreground);
  --color-text-on-primary: var(--primary-foreground);
  --color-text-link: var(--primary);
  --color-button-text: var(--primary-foreground);
  
  /* Prose/Content */
  --color-prose-text: var(--foreground);
  --color-code-bg: var(--muted);
  --color-code-text: var(--foreground);
  --color-code-pre-bg: var(--muted);
  --color-code-pre-text: var(--foreground);
  --color-selection: oklch(0.5789 0.1899 140.8644 / 0.3);
  --color-placeholder: var(--muted-foreground);
  
  /* UI Elements */
  --color-modal-backdrop: rgba(0, 0, 0, 0.5);
  --color-card-bg: var(--card);
  --color-tooltip-bg: var(--muted);
  --color-divider: var(--border);
  
  /* Alert/Status colors - Info/Blue (dark) */
  --color-info-bg: oklch(0.267 0.068 265.75 / 0.2);
  --color-info-border: oklch(0.367 0.131 265.633);
  --color-info-text: oklch(0.858 0.076 253.524);
  --color-info-icon: oklch(0.858 0.076 253.524);
  
  /* Alert/Status colors - Warning/Yellow (dark) */
  --color-warning-bg: oklch(0.488 0.13 82.837 / 0.2);
  --color-warning-border: oklch(0.455 0.107 73.324);
  --color-warning-text: oklch(0.933 0.108 99.014);
  --color-warning-icon: oklch(0.933 0.108 99.014);
  
  /* Alert/Status colors - Success/Purple (dark) */
  --color-success-bg: oklch(0.333 0.115 308.221 / 0.2);
  --color-success-border: oklch(0.413 0.148 308.526);
  --color-success-text: oklch(0.868 0.116 307.331);
  --color-success-icon: oklch(0.868 0.116 307.331);
  
  /* Alert/Status colors - Error/Red (dark) */
  --color-error-bg: oklch(0.393 0.163 28.004 / 0.2);
  --color-error-border: oklch(0.478 0.194 27.325);
  --color-error-text: oklch(0.849 0.136 24.151);
  --color-error-icon: var(--destructive);
}

/* Tailwind theme integration */
@theme {
  --color-background: var(--color-background);
  --color-foreground: var(--color-foreground);
  --color-border: var(--color-border);
  --color-primary: var(--color-primary);
  --color-primary-hover: var(--color-primary-hover);
  
  /* Additional text colors */
  --color-text-base: var(--color-text-base);
  --color-text-muted: var(--color-text-muted);
  --color-text-on-primary: var(--color-text-on-primary);
  --color-text-link: var(--color-text-link);
  --color-button-text: var(--color-button-text);
  
  /* UI element colors */
  --color-card-bg: var(--color-card-bg);
  --color-tooltip-bg: var(--color-tooltip-bg);
  --color-divider: var(--color-divider);
  
  /* Status colors */
  --color-info-bg: var(--color-info-bg);
  --color-info-border: var(--color-info-border);
  --color-info-text: var(--color-info-text);
  
  --color-warning-bg: var(--color-warning-bg);
  --color-warning-border: var(--color-warning-border);
  --color-warning-text: var(--color-warning-text);
  
  --color-success-bg: var(--color-success-bg);
  --color-success-border: var(--color-success-border);
  --color-success-text: var(--color-success-text);
  
  --color-error-bg: var(--color-error-bg);
  --color-error-border: var(--color-error-border);
  --color-error-text: var(--color-error-text);
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
    'Helvetica Neue', Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Checkbox styling - use primary color */
input[type="checkbox"] {
  accent-color: var(--color-primary);
}

input[type="checkbox"]:checked {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
}

/* Placeholder styling */
input::placeholder,
textarea::placeholder {
  color: var(--color-placeholder);
  opacity: 1;
}

input::-webkit-input-placeholder,
textarea::-webkit-input-placeholder {
  color: var(--color-placeholder);
  opacity: 1;
}

input::-moz-placeholder,
textarea::-moz-placeholder {
  color: var(--color-placeholder);
  opacity: 1;
}

input:-ms-input-placeholder,
textarea:-ms-input-placeholder {
  color: var(--color-placeholder);
  opacity: 1;
}

/* Custom prose styling for dark mode and better markdown rendering */
.prose {
  color: var(--color-prose-text);
  font-size: 0.95rem;
  line-height: 1.5;
}

.prose strong {
  font-weight: 700;
  color: inherit;
}

.prose em {
  font-style: italic;
  color: inherit;
}

.prose u {
  text-decoration: underline;
  color: inherit;
}

.prose p {
  margin-top: 0.75em;
  margin-bottom: 0.75em;
  color: inherit;
}

.prose p:first-child {
  margin-top: 0;
}

.prose p:last-child {
  margin-bottom: 0;
}

.prose ul,
.prose ol {
  margin-top: 0.75em;
  margin-bottom: 0.75em;
  padding-left: 1.5em;
  color: inherit;
}

.prose li {
  margin-top: 0.25em;
  margin-bottom: 0.25em;
  color: inherit;
}

.prose code {
  background-color: var(--color-code-bg);
  padding: 0.2em 0.4em;
  border-radius: 0.25rem;
  font-size: 0.875em;
  color: var(--color-code-text);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}

.prose code::before,
.prose code::after {
  content: none;
}

.prose pre {
  background-color: var(--color-code-pre-bg);
  padding: 0.75em;
  border-radius: 0.375rem;
  overflow-x: auto;
  margin-top: 0.75em;
  margin-bottom: 0.75em;
}

.prose pre:first-child {
  margin-top: 0;
}

.prose pre:last-child {
  margin-bottom: 0;
}

.prose pre code {
  background-color: transparent;
  padding: 0;
  border-radius: 0;
  font-size: 0.875em;
  color: var(--color-code-pre-text);
}

.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
  color: inherit;
  font-weight: 600;
  margin-top: 1em;
  margin-bottom: 0.5em;
}

.prose h1:first-child,
.prose h2:first-child,
.prose h3:first-child {
  margin-top: 0;
}

.prose a {
  color: var(--color-primary-link);
  text-decoration: underline;
}

/* Caret visibility for transparent textarea */
textarea.text-transparent {
  -webkit-text-fill-color: transparent;
}

textarea.text-transparent::selection {
  background-color: var(--color-selection);
}

/* Overlay prose styling - remove all margins to match textarea */
.prose-overlay {
  color: inherit;
}

.prose-overlay strong {
  font-weight: 700;
  color: inherit;
}

.prose-overlay em {
  font-style: italic;
  color: inherit;
}

.prose-overlay u {
  text-decoration: underline;
  color: inherit;
}

.prose-overlay p {
  margin: 0;
  color: inherit;
}

.prose-overlay ul,
.prose-overlay ol {
  margin: 0;
  padding-left: 1.5em;
  color: inherit;
}

.prose-overlay li {
  margin: 0;
  color: inherit;
}

.prose-overlay code {
  background-color: var(--color-code-bg);
  padding: 0;
  border-radius: 0.25rem;
  font-size: inherit;
  color: var(--color-code-text);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}

.prose-overlay code::before,
.prose-overlay code::after {
  content: none;
}

.prose-overlay pre {
  background-color: var(--color-code-pre-bg);
  padding: 0;
  border-radius: 0.375rem;
  overflow-x: auto;
  margin: 0;
}

.prose-overlay pre code {
  background-color: transparent;
  padding: 0;
  border-radius: 0;
  font-size: inherit;
  color: var(--color-code-pre-text);
}

.prose-overlay h1,
.prose-overlay h2,
.prose-overlay h3,
.prose-overlay h4,
.prose-overlay h5,
.prose-overlay h6 {
  color: inherit;
  font-weight: 600;
  margin: 0;
}

.prose-overlay a {
  color: var(--color-primary-link);
  text-decoration: underline;
}
