@import 'tailwindcss';
@plugin '@tailwindcss/typography';

@custom-variant dark (&:where(.dark, .dark *));

/* Light mode colors - Stone & Lime theme */
:root {
  --color-background: oklch(0.985 0.001 106.423); /* stone-50 */
  --color-foreground: oklch(0.216 0.006 56.043); /* stone-900 */
  --color-border: oklch(0.97 0.001 106.424); /* stone-100 - more subtle */
  --color-primary: oklch(0.648 0.205 129.8); /* lime-600 */
  --color-primary-hover: oklch(0.528 0.162 130.393); /* lime-700 */
  --color-primary-link: oklch(0.648 0.205 129.8); /* lime-600 */
  
  /* Text colors */
  --color-text-base: oklch(0.216 0.006 56.043); /* stone-900 */
  --color-text-muted: oklch(0.553 0.013 58.071); /* stone-500 */
  --color-text-on-primary: #fff; /* white text on primary buttons/tooltips */
  --color-text-link: oklch(0.547 0.186 255.282); /* blue-600 */
  --color-button-text: #fff; /* white text on lime-600 button */
  
  /* Prose/Content */
  --color-prose-text: oklch(0.216 0.006 56.043); /* stone-900 */
  --color-code-bg: oklch(0.923 0.003 48.717); /* stone-200 */
  --color-code-text: oklch(0.374 0.01 67.558); /* stone-700 */
  --color-code-pre-bg: oklch(0.923 0.003 48.717); /* stone-200 */
  --color-code-pre-text: oklch(0.268 0.007 34.298); /* stone-800 */
  --color-selection: oklch(0.841 0.215 130.229 / 0.3); /* lime-400 at 30% opacity */
  --color-placeholder: oklch(0.553 0.013 58.071); /* stone-500 */
  
  /* UI Elements */
  --color-modal-backdrop: rgba(0, 0, 0, 0.5);
  --color-card-bg: #fff;
  --color-tooltip-bg: oklch(0.268 0.007 34.298); /* stone-800 */
  --color-divider: oklch(0.923 0.003 48.717); /* stone-200 */
  
  /* Alert/Status colors - Info/Blue */
  --color-info-bg: oklch(0.955 0.024 254.604); /* blue-50 */
  --color-info-border: oklch(0.885 0.071 254.946); /* blue-200 */
  --color-info-text: oklch(0.367 0.131 265.633); /* blue-800 */
  --color-info-icon: oklch(0.367 0.131 265.633); /* blue-800 */
  
  /* Alert/Status colors - Warning/Yellow */
  --color-warning-bg: oklch(0.981 0.024 97.433); /* yellow-50 */
  --color-warning-border: oklch(0.932 0.111 99.572); /* yellow-200 */
  --color-warning-text: oklch(0.455 0.107 73.324); /* yellow-800 */
  --color-warning-icon: oklch(0.455 0.107 73.324); /* yellow-800 */
  
  /* Alert/Status colors - Success/Purple (for tips) */
  --color-success-bg: oklch(0.976 0.025 308.299); /* purple-50 */
  --color-success-border: oklch(0.913 0.065 307.174); /* purple-200 */
  --color-success-text: oklch(0.413 0.148 308.526); /* purple-800 */
  --color-success-icon: oklch(0.413 0.148 308.526); /* purple-800 */
  
  /* Alert/Status colors - Error/Red */
  --color-error-bg: oklch(0.971 0.022 17.396); /* red-50 */
  --color-error-border: oklch(0.898 0.095 18.334); /* red-200 */
  --color-error-text: oklch(0.478 0.194 27.325); /* red-800 */
  --color-error-icon: oklch(0.547 0.246 27.325); /* red-600 */
}

/* Dark mode colors - Stone & Lime theme */
.dark {
  --color-background: oklch(0.147 0.004 49.25); /* stone-950 */
  --color-foreground: oklch(0.97 0.001 106.424); /* stone-100 */
  --color-border: oklch(0.216 0.006 56.043); /* stone-900 - more subtle */
  --color-primary: oklch(0.768 0.233 129.529); /* lime-500 */
  --color-primary-hover: oklch(0.841 0.215 130.229); /* lime-400 */
  --color-primary-link: oklch(0.768 0.233 129.529); /* lime-500 */
  
  /* Text colors */
  --color-text-base: oklch(0.97 0.001 106.424); /* stone-100 */
  --color-text-muted: oklch(0.709 0.01 56.259); /* stone-400 */
  --color-text-on-primary: #fff; /* white text on primary buttons/tooltips */
  --color-text-link: oklch(0.7 0.161 254.604); /* blue-400 */
  --color-button-text: oklch(0.147 0.004 49.25); /* stone-950 - dark text on bright lime button */
  
  /* Prose/Content */
  --color-prose-text: oklch(0.97 0.001 106.424); /* stone-100 */
  --color-code-bg: oklch(0.268 0.007 34.298); /* stone-800 */
  --color-code-text: oklch(0.895 0.154 131.064); /* lime-300 */
  --color-code-pre-bg: oklch(0.268 0.007 34.298); /* stone-800 */
  --color-code-pre-text: oklch(0.939 0.09 131.585); /* lime-200 */
  --color-selection: oklch(0.648 0.205 129.8 / 0.3); /* lime-600 at 30% opacity */
  --color-placeholder: oklch(0.553 0.013 58.071); /* stone-500 */
  
  /* UI Elements */
  --color-modal-backdrop: rgba(0, 0, 0, 0.5);
  --color-card-bg: oklch(0.268 0.007 34.298); /* stone-800 */
  --color-tooltip-bg: oklch(0.268 0.007 34.298); /* stone-800 */
  --color-divider: oklch(0.374 0.01 67.558); /* stone-700 */
  
  /* Alert/Status colors - Info/Blue (dark) */
  --color-info-bg: oklch(0.267 0.068 265.75 / 0.2); /* blue-900/20 */
  --color-info-border: oklch(0.367 0.131 265.633); /* blue-800 */
  --color-info-text: oklch(0.858 0.076 253.524); /* blue-300 */
  --color-info-icon: oklch(0.858 0.076 253.524); /* blue-300 */
  
  /* Alert/Status colors - Warning/Yellow (dark) */
  --color-warning-bg: oklch(0.488 0.13 82.837 / 0.2); /* yellow-900/20 */
  --color-warning-border: oklch(0.455 0.107 73.324); /* yellow-800 */
  --color-warning-text: oklch(0.933 0.108 99.014); /* yellow-300 */
  --color-warning-icon: oklch(0.933 0.108 99.014); /* yellow-300 */
  
  /* Alert/Status colors - Success/Purple (dark) */
  --color-success-bg: oklch(0.333 0.115 308.221 / 0.2); /* purple-900/20 */
  --color-success-border: oklch(0.413 0.148 308.526); /* purple-800 */
  --color-success-text: oklch(0.868 0.116 307.331); /* purple-300 */
  --color-success-icon: oklch(0.868 0.116 307.331); /* purple-300 */
  
  /* Alert/Status colors - Error/Red (dark) */
  --color-error-bg: oklch(0.393 0.163 28.004 / 0.2); /* red-900/20 */
  --color-error-border: oklch(0.478 0.194 27.325); /* red-800 */
  --color-error-text: oklch(0.849 0.136 24.151); /* red-300 */
  --color-error-icon: oklch(0.849 0.136 24.151); /* red-300 */
}

/* Tailwind theme integration */
@theme {
  --color-background: var(--color-background);
  --color-foreground: var(--color-foreground);
  --color-border: var(--color-border);
  --color-primary: var(--color-primary);
  --color-primary-hover: var(--color-primary-hover);
  
  /* Additional text colors */
  --color-text-base: var(--color-text-base);
  --color-text-muted: var(--color-text-muted);
  --color-text-on-primary: var(--color-text-on-primary);
  --color-text-link: var(--color-text-link);
  --color-button-text: var(--color-button-text);
  
  /* UI element colors */
  --color-card-bg: var(--color-card-bg);
  --color-tooltip-bg: var(--color-tooltip-bg);
  --color-divider: var(--color-divider);
  
  /* Status colors */
  --color-info-bg: var(--color-info-bg);
  --color-info-border: var(--color-info-border);
  --color-info-text: var(--color-info-text);
  
  --color-warning-bg: var(--color-warning-bg);
  --color-warning-border: var(--color-warning-border);
  --color-warning-text: var(--color-warning-text);
  
  --color-success-bg: var(--color-success-bg);
  --color-success-border: var(--color-success-border);
  --color-success-text: var(--color-success-text);
  
  --color-error-bg: var(--color-error-bg);
  --color-error-border: var(--color-error-border);
  --color-error-text: var(--color-error-text);
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
    'Helvetica Neue', Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Checkbox styling - use primary color */
input[type="checkbox"] {
  accent-color: var(--color-primary);
}

input[type="checkbox"]:checked {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
}

/* Placeholder styling */
input::placeholder,
textarea::placeholder {
  color: var(--color-placeholder);
  opacity: 1;
}

input::-webkit-input-placeholder,
textarea::-webkit-input-placeholder {
  color: var(--color-placeholder);
  opacity: 1;
}

input::-moz-placeholder,
textarea::-moz-placeholder {
  color: var(--color-placeholder);
  opacity: 1;
}

input:-ms-input-placeholder,
textarea:-ms-input-placeholder {
  color: var(--color-placeholder);
  opacity: 1;
}

/* Custom prose styling for dark mode and better markdown rendering */
.prose {
  color: var(--color-prose-text);
  font-size: 0.95rem;
  line-height: 1.5;
}

.prose strong {
  font-weight: 700;
  color: inherit;
}

.prose em {
  font-style: italic;
  color: inherit;
}

.prose u {
  text-decoration: underline;
  color: inherit;
}

.prose p {
  margin-top: 0.75em;
  margin-bottom: 0.75em;
  color: inherit;
}

.prose p:first-child {
  margin-top: 0;
}

.prose p:last-child {
  margin-bottom: 0;
}

.prose ul,
.prose ol {
  margin-top: 0.75em;
  margin-bottom: 0.75em;
  padding-left: 1.5em;
  color: inherit;
}

.prose li {
  margin-top: 0.25em;
  margin-bottom: 0.25em;
  color: inherit;
}

.prose code {
  background-color: var(--color-code-bg);
  padding: 0.2em 0.4em;
  border-radius: 0.25rem;
  font-size: 0.875em;
  color: var(--color-code-text);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}

.prose code::before,
.prose code::after {
  content: none;
}

.prose pre {
  background-color: var(--color-code-pre-bg);
  padding: 0.75em;
  border-radius: 0.375rem;
  overflow-x: auto;
  margin-top: 0.75em;
  margin-bottom: 0.75em;
}

.prose pre:first-child {
  margin-top: 0;
}

.prose pre:last-child {
  margin-bottom: 0;
}

.prose pre code {
  background-color: transparent;
  padding: 0;
  border-radius: 0;
  font-size: 0.875em;
  color: var(--color-code-pre-text);
}

.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
  color: inherit;
  font-weight: 600;
  margin-top: 1em;
  margin-bottom: 0.5em;
}

.prose h1:first-child,
.prose h2:first-child,
.prose h3:first-child {
  margin-top: 0;
}

.prose a {
  color: var(--color-primary-link);
  text-decoration: underline;
}

/* Caret visibility for transparent textarea */
textarea.text-transparent {
  -webkit-text-fill-color: transparent;
}

textarea.text-transparent::selection {
  background-color: var(--color-selection);
}

/* Overlay prose styling - remove all margins to match textarea */
.prose-overlay {
  color: inherit;
}

.prose-overlay strong {
  font-weight: 700;
  color: inherit;
}

.prose-overlay em {
  font-style: italic;
  color: inherit;
}

.prose-overlay u {
  text-decoration: underline;
  color: inherit;
}

.prose-overlay p {
  margin: 0;
  color: inherit;
}

.prose-overlay ul,
.prose-overlay ol {
  margin: 0;
  padding-left: 1.5em;
  color: inherit;
}

.prose-overlay li {
  margin: 0;
  color: inherit;
}

.prose-overlay code {
  background-color: var(--color-code-bg);
  padding: 0;
  border-radius: 0.25rem;
  font-size: inherit;
  color: var(--color-code-text);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}

.prose-overlay code::before,
.prose-overlay code::after {
  content: none;
}

.prose-overlay pre {
  background-color: var(--color-code-pre-bg);
  padding: 0;
  border-radius: 0.375rem;
  overflow-x: auto;
  margin: 0;
}

.prose-overlay pre code {
  background-color: transparent;
  padding: 0;
  border-radius: 0;
  font-size: inherit;
  color: var(--color-code-pre-text);
}

.prose-overlay h1,
.prose-overlay h2,
.prose-overlay h3,
.prose-overlay h4,
.prose-overlay h5,
.prose-overlay h6 {
  color: inherit;
  font-weight: 600;
  margin: 0;
}

.prose-overlay a {
  color: var(--color-primary-link);
  text-decoration: underline;
}
